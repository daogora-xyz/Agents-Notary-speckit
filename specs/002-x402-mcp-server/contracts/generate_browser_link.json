{
  "name": "generate_browser_link",
  "description": "Generate MetaMask deep link for browser-based payment initiation. Returns URL that pre-fills MetaMask transaction with recipient, amount, and network. Callback URL receives transaction hash parameter upon completion.",
  "inputSchema": {
    "type": "object",
    "properties": {
      "payment_requirement": {
        "type": "object",
        "description": "x402 payment requirement from create_payment_requirement",
        "properties": {
          "x402_version": {
            "type": "integer",
            "description": "x402 protocol version",
            "const": 1
          },
          "scheme": {
            "type": "string",
            "description": "Payment scheme",
            "const": "exact"
          },
          "network": {
            "type": "string",
            "description": "Blockchain network",
            "enum": ["base", "base-sepolia", "arbitrum"]
          },
          "maxAmountRequired": {
            "type": "string",
            "description": "Maximum payment amount in atomic units",
            "pattern": "^[1-9][0-9]*$"
          },
          "payee": {
            "type": "string",
            "description": "Payee Ethereum address (0x-prefixed)",
            "pattern": "^0x[a-fA-F0-9]{40}$"
          },
          "valid_until": {
            "type": "string",
            "description": "ISO8601 timestamp - payment expires after",
            "format": "date-time"
          },
          "nonce": {
            "type": "string",
            "description": "Blockchain-sourced nonce (hex string)",
            "pattern": "^0x[a-fA-F0-9]+$"
          },
          "asset": {
            "type": "string",
            "description": "USDC contract address for the network",
            "pattern": "^0x[a-fA-F0-9]{40}$"
          }
        },
        "required": ["x402_version", "scheme", "network", "maxAmountRequired", "payee", "valid_until", "nonce", "asset"]
      },
      "callback_url": {
        "type": "string",
        "description": "HTTPS URL to receive transaction hash upon completion (e.g., https://certify.ar4s.com/callback/abc123). Wallet will append ?tx=0x... parameter.",
        "format": "uri",
        "pattern": "^https://"
      }
    },
    "required": ["payment_requirement", "callback_url"]
  },
  "outputSchema": {
    "type": "object",
    "properties": {
      "url": {
        "type": "string",
        "description": "MetaMask deep link URL (format: https://link.metamask.io/send/{usdc_contract}@{chain_id}/transfer?address={payee}&uint256={amount})",
        "format": "uri"
      },
      "expires_at": {
        "type": "string",
        "description": "ISO8601 timestamp - link expires when payment_requirement.valid_until expires",
        "format": "date-time"
      }
    },
    "required": ["url", "expires_at"]
  }
}
